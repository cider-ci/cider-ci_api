<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Thomas Schank DrTom@Schank.ch" />
  <meta name="date" content="2014-11-18" />
  <title>Cider-CI API Documentation</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
</head>
<body>
    <div class="navbar navbar-static-top">
    <div class="navbar-inner">
      <div class="container">
        <span class="doc-title">Cider-CI API Documentation</span>
        <ul class="nav pull-right doc-info">
                    <li><p class="navbar-text">Thomas Schank <script type="text/javascript">
<!--
h='&#x53;&#x63;&#104;&#x61;&#110;&#x6b;&#46;&#x63;&#104;';a='&#64;';n='&#68;&#114;&#84;&#x6f;&#x6d;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+e+'<\/'+'a'+'>');
// -->
</script><noscript>&#68;&#114;&#84;&#x6f;&#x6d;&#32;&#x61;&#116;&#32;&#x53;&#x63;&#104;&#x61;&#110;&#x6b;&#32;&#100;&#x6f;&#116;&#32;&#x63;&#104;</noscript></p></li>
                              <li><p class="navbar-text">2014-11-18</p></li>
                  </ul>
      </div>
    </div>
  </div>
    <div class="container">
    <div class="row">
            <div id="TOC" class="span3">
        <div class="well toc">
        <ul>
          <li class="nav-header">Table of Contents</li>
        </ul>
        <ul>
        <li><a href="#cider-ci-api-documentation">Cider-CI API Documentation</a><ul>
        <li><a href="#state-of-the-api">State of the API</a></li>
        <li><a href="#authentication">Authentication</a><ul>
        <li><a href="#session-cookie">Session-Cookie</a></li>
        <li><a href="#basic-auth">Basic-Auth</a></li>
        </ul></li>
        <li><a href="#core-api-resources">Core API Resources</a><ul>
        <li><a href="#general-properties">General Properties</a><ul>
        <li><a href="#content-types">Content Types</a></li>
        <li><a href="#index-resources">Index Resources</a></li>
        </ul></li>
        <li><a href="#execution">Execution</a><ul>
        <li><a href="#get-executionid">GET <code>/execution/:id</code></a></li>
        </ul></li>
        <li><a href="#execution-stats">Execution-Stats</a><ul>
        <li><a href="#get-executionidstats">GET <code>/execution/:id/stats</code></a></li>
        </ul></li>
        <li><a href="#executions">Executions</a><ul>
        <li><a href="#get-executions">GET <code>/executions/</code></a></li>
        </ul></li>
        <li><a href="#root">Root</a><ul>
        <li><a href="#get">GET <code>/</code></a></li>
        </ul></li>
        <li><a href="#task">Task</a><ul>
        <li><a href="#get-taskid">GET <code>/task/:id</code></a></li>
        </ul></li>
        <li><a href="#tasks">Tasks</a><ul>
        <li><a href="#get-executionexecution_idtasks">GET <code>/execution/:execution_id/tasks/</code></a></li>
        </ul></li>
        <li><a href="#tree-attachment">Tree-Attachment</a><ul>
        <li><a href="#get-tree-attachmentid">GET <code>/tree-attachment/:id</code></a></li>
        </ul></li>
        <li><a href="#tree-attachments">Tree-Attachments</a><ul>
        <li><a href="#get-executionexecution_idattachments">GET <code>/execution/:execution_id/attachments/</code></a></li>
        </ul></li>
        <li><a href="#trial-attachment">Trial-Attachment</a><ul>
        <li><a href="#get-trial-attachmentid">GET <code>/trial-attachment/:id</code></a></li>
        </ul></li>
        <li><a href="#trial-attachments">Trial-Attachments</a><ul>
        <li><a href="#get-trialtrial_idtrial-attachments">GET <code>/trial/:trial_id/trial-attachments/</code></a></li>
        </ul></li>
        <li><a href="#trial">Trial</a><ul>
        <li><a href="#get-trialid">GET <code>/trial/:id</code></a></li>
        </ul></li>
        <li><a href="#trials">Trials</a><ul>
        <li><a href="#get-tasktask_idtrials">GET <code>/task/:task_id/trials/</code></a></li>
        </ul></li>
        </ul></li>
        <li><a href="#storage-resources">Storage-Resources</a><ul>
        <li><a href="#general-properties-1">General Properties</a><ul>
        <li><a href="#uploading">Uploading</a></li>
        <li><a href="#retention-time">Retention Time</a></li>
        </ul></li>
        <li><a href="#trial-attachments-1">Trial-Attachments</a><ul>
        <li><a href="#get-tree-attachmentstrial_id">GET <code>/tree-attachments/:trial_id/*</code></a></li>
        <li><a href="#put-tree-attachmentstrial_id">PUT <code>/tree-attachments/:trial_id/*</code></a></li>
        <li><a href="#delete-tree-attachmentstrial_id">DELETE <code>/tree-attachments/:trial_id/*</code></a></li>
        </ul></li>
        <li><a href="#tree-attachments-1">Tree-Attachments</a><ul>
        <li><a href="#get-tree-attachmentstree_id">GET <code>/tree-attachments/:tree_id/*</code></a></li>
        <li><a href="#put-tree-attachmentstree_id">PUT <code>/tree-attachments/:tree_id/*</code></a></li>
        <li><a href="#delete-tree-attachmentstree_id">DELETE <code>/tree-attachments/:tree_id/*</code></a></li>
        </ul></li>
        </ul></li>
        </ul></li>
        </ul>
        </div>
      </div>
            <div class="span9">
            <h1 id="cider-ci-api-documentation">Cider-CI API Documentation</h1>
<p>Visit the <a href="https://github.com/cider-ci/cider-ci">Cider-CI Project</a> for more information on Cider-CI.</p>
<p>The <a href="https://rawgit.com/cider-ci/cider-ci/master/doc/entities.svg">entities diagram</a> is helpful to understand relations between resources.</p>
<h2 id="state-of-the-api">State of the API</h2>
<p><strong>The Cider-CI API is beta.</strong></p>
<p>This Cider-CI API and in particular the responses of type <code>application/json-roa+json</code> is work in progress. Breaking changes in the of the <a href="https://github.com/json-roa">JSON-ROA</a> part of the API do not necessarily increase the major number of the API and certainly not those of Cider-CI itself.</p>
<p>The current major release number of the API itself is <code>2</code>. This is reflected in the prefix <code>/api/v2</code> prefix. The major number was lifted during the migration from <a href="http://stateless.co/hal_specification.html">HAL</a> to <a href="https://github.com/json-roa">JSON-ROA</a>.</p>
<h2 id="authentication">Authentication</h2>
<h3 id="session-cookie">Session-Cookie</h3>
<p>The API accepts the <code>cider-ci_services-session</code> cookie set on sing-in from the browser interfaces.</p>
<h3 id="basic-auth">Basic-Auth</h3>
<p>If no session cookie was found (or validation of the cookie failed) <em>HTTP Basic authentication</em> is used with the same user and password as used in the browser interface.</p>
<h2 id="core-api-resources">Core API Resources</h2>
<p>All of the resources in this section are prefixed with <code>/cider-ci/api/v2</code>. This prefix is omitted for brevity in the following.</p>
<h3 id="general-properties">General Properties</h3>
<h4 id="content-types">Content Types</h4>
<p>The core API supports the content types <code>application/json-roa+json</code> and <code>application/json</code> for <code>GET</code> requests to all resources. The former includes hyperlinks to related resources and to this documentation.</p>
<p>The API evaluates the accept header including the <code>q</code> parameter, see <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">Section 14 of RFC 2616</a> . The content type <code>application/json-roa+json</code> as a higher quality of service and is thus preferred. If no matching accept header is supplied the content-type <code>application/json-roa+json</code> will be used.</p>
<p>All data requests containing a body like <code>PUT</code>, <code>PATCH</code>, and <code>POST</code> support the content type <code>application/json</code>.</p>
<h4 id="index-resources">Index Resources</h4>
<p>Several resources are conceptually indexes, e.g. <code>/executions/</code>, which rather return several references to the same kind of resource, e.g. <code>/execution/:id</code>. All of these indexes are paginated an use the <code>page</code> parameter with an integer value for iteration.</p>
<p>The content type <code>application/json-roa+json</code> includes a <code>next</code> link which should be used to iterate index resources.</p>
<h3 id="execution">Execution</h3>
<h4 id="get-executionid">GET <code>/execution/:id</code></h4>
<p>Returns the properties of the corresponding <em>Execution</em>.</p>
<h3 id="execution-stats">Execution-Stats</h3>
<h4 id="get-executionidstats">GET <code>/execution/:id/stats</code></h4>
<p>Returns the aggregated count of the number of tasks belonging to an <em>Execution</em> with respect to their state.</p>
<h3 id="executions">Executions</h3>
<h4 id="get-executions">GET <code>/executions/</code></h4>
<p>Returns a list of links each pointing to an <code>Execution</code>. Order is descending by the <code>created_at</code> time-stamp.</p>
<h5 id="query-parameters">Query Parameters</h5>
<h6 id="branch">branch</h6>
<p>Filters <em>Executions</em> of commits which are directly referenced by the given branch with name equal to the given value where the matching is case insensitive.</p>
<p>Query string example: <code>?branch=master</code></p>
<p>Note: this filter is case insensitive with respect to <em>branch-name</em>.</p>
<h6 id="branchdescendants">branchdescendants</h6>
<p>Similar as above, however it will also include all descendants of the commit referenced by the given branch name.</p>
<p>Examples:</p>
<ol style="list-style-type: decimal">
<li><p>Descendants of the branch master: <code>?branch=master</code></p></li>
<li><p>A combination of <code>branch</code> and <code>branchdescendants</code> can make sense: <code>?branchdescendants=next&amp;branch=master</code>, read: give me the executions of the commit where the branch master points to and which are descendants of the branch next.</p></li>
</ol>
<h6 id="repository">repository</h6>
<p>Filters <em>Executions</em> related to commits within repositories with the name equal to the value of the parameter.</p>
<p>This filter is also case insensitive.</p>
<p>Examples:</p>
<ol style="list-style-type: decimal">
<li>executions for the <em>Madek</em> repository: <code>?repository=madek</code></li>
<li>for the <em>Madek</em> repository and for the master branch: <code>?repository=madek&amp;branch=master</code></li>
<li>including descendants: <code>?repository=madek&amp;branchdescendants=master</code></li>
<li>composing even more: <code>?repository=madek&amp;branchdescendants=next&amp;branch=master</code></li>
</ol>
<h6 id="state">state</h6>
<p>Filters <em>Executions</em> with state equal to the value of the parameter.</p>
<p>Query string example: <code>?branch-name=master&amp;repository-name=leihs&amp;state=success</code></p>
<h3 id="root">Root</h3>
<h4 id="get">GET <code>/</code></h4>
<p>The entry-point.</p>
<h3 id="task">Task</h3>
<h4 id="get-taskid">GET <code>/task/:id</code></h4>
<p>Returns the properties of the corresponding <code>Task</code>.</p>
<h3 id="tasks">Tasks</h3>
<h4 id="get-executionexecution_idtasks">GET <code>/execution/:execution_id/tasks/</code></h4>
<p>Returns a list of links each pointing to a <code>Task</code> which belongs to <code>Execution</code> with the id <code>:execution_id</code>. Order is ascending with respect to the <code>name</code> property.</p>
<h5 id="query-parameters-1">Query Parameters</h5>
<h6 id="state-1">state</h6>
<p>Filters <code>Tasks</code> with state equal to the value of the parameter.</p>
<p>Query string example: <code>?page=0&amp;state=failed</code></p>
<h3 id="tree-attachment">Tree-Attachment</h3>
<h4 id="get-tree-attachmentid">GET <code>/tree-attachment/:id</code></h4>
<p>Returns the properties of a <em>Tree-Attachment</em>.</p>
<p>This does not return the data-stream of the attachment itself. A hyperlink to the latter is included in <code>application/json-roa+json</code> response types, see <a href="#content-types">Content Types</a>.</p>
<h3 id="tree-attachments">Tree-Attachments</h3>
<h4 id="get-executionexecution_idattachments">GET <code>/execution/:execution_id/attachments/</code></h4>
<p>Returns a list of ids each belonging to a <em>Tree-Attachment</em> which belongs to the <em>Execution</em> with the id <code>:execution_id</code>. Note, the <code>tree_id</code> is a inherent property of every <em>Execution</em>. Order is ascending with respect to the <code>path</code> property.</p>
<h3 id="trial-attachment">Trial-Attachment</h3>
<h4 id="get-trial-attachmentid">GET <code>/trial-attachment/:id</code></h4>
<p>Returns the properties of a <em>Trial-Attachment</em>.</p>
<p>This does not return the data-stream of the attachment itself. A hyperlink to the latter is included in <code>application/json-roa+json</code> response types, see <a href="#content-types">Content Types</a>.</p>
<h3 id="trial-attachments">Trial-Attachments</h3>
<h4 id="get-trialtrial_idtrial-attachments">GET <code>/trial/:trial_id/trial-attachments/</code></h4>
<p>Returns a list of ids. Each belongs to a <em>Trial-Attachment</em> which belongs to the trial with the id <code>:trial_id</code>. Order is ascending with respect to the <code>path</code> property.</p>
<h3 id="trial">Trial</h3>
<h4 id="get-trialid">GET <code>/trial/:id</code></h4>
<p>Returns the properties of the trial with the id <code>:id</code>.</p>
<h3 id="trials">Trials</h3>
<h4 id="get-tasktask_idtrials">GET <code>/task/:task_id/trials/</code></h4>
<p>Returns a list of links each pointing to a trial which belongs to the task with the id <code>:task_id</code>. Order is descending with respect to the <code>updated_at</code> property.</p>
<h5 id="query-parameters-2">Query Parameters</h5>
<h6 id="state-2">state</h6>
<p>Filters trials with state equal to the value of the parameter.</p>
<p>Query string example: <code>?page=0&amp;state=failed</code></p>
<h2 id="storage-resources">Storage-Resources</h2>
<p>All of the resources in this section are prefixed with <code>/cider-ci/storage</code>. This prefix is omitted for brevity in the following.</p>
<h3 id="general-properties-1">General Properties</h3>
<h4 id="uploading">Uploading</h4>
<p>Uploading is preformed via http <code>PUT</code>.</p>
<p>Every storage artifact has an associated content-type. This content-type is set from the content-type header of the <code>PUT</code> request and therefore should be set properly. If not specified, the content-type <code>application/octet-stream</code> will be used.</p>
<h4 id="retention-time">Retention Time</h4>
<p>Uploaded artifacts will be automatically deleted after a retention time has been reached.</p>
<h3 id="trial-attachments-1">Trial-Attachments</h3>
<p>Trial-Attachments will be listed in the user-interface with the matching trial. The default retention time is 10 days.</p>
<p>The <code>:trial_id</code> should be an existing id of a trial. This is however not enforced.</p>
<p>The <code>*</code> postfix can be an arbitrary url-path in accordance with the http path specification, e.g. <code>screenshots/image01.png</code>. Query parameters will be ignored.</p>
<h4 id="get-tree-attachmentstrial_id">GET <code>/tree-attachments/:trial_id/*</code></h4>
<h4 id="put-tree-attachmentstrial_id">PUT <code>/tree-attachments/:trial_id/*</code></h4>
<h4 id="delete-tree-attachmentstrial_id">DELETE <code>/tree-attachments/:trial_id/*</code></h4>
<h3 id="tree-attachments-1">Tree-Attachments</h3>
<p>Tree-Attachments will be listed in the user-interface with the matching execution. The default retention time is 90 days.</p>
<p>Similar restrictions as with the Trial-Attachments apply.</p>
<h4 id="get-tree-attachmentstree_id">GET <code>/tree-attachments/:tree_id/*</code></h4>
<h4 id="put-tree-attachmentstree_id">PUT <code>/tree-attachments/:tree_id/*</code></h4>
<h4 id="delete-tree-attachmentstree_id">DELETE <code>/tree-attachments/:tree_id/*</code></h4>
            </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</body>
</html>
